# TrendXL 2.0 - Debug CORS Issue

## üö® –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞:**
```
Access to XMLHttpRequest at 'https://accurate-nurturing-production.up.railway.app/health' 
from origin 'https://trendxl-20-production-df03.up.railway.app' 
has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### **–ü—Ä–æ–±–ª–µ–º–∞:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –≤—Å–µ –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π URL!

- **–û–∂–∏–¥–∞–µ–º–æ:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ `/health` (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å)
- **–†–µ–∞–ª—å–Ω–æ:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ `https://accurate-nurturing-production.up.railway.app/health`
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å –≤ production —Å–±–æ—Ä–∫–µ

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

### **1. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π**

**–§–∞–π–ª:** `src/services/backendApi.ts`
```javascript
// –¢–µ–ø–µ—Ä—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –≤ production
const BACKEND_API_BASE_URL = import.meta.env.PROD 
  ? '' // –í production –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏
  : (import.meta.env.VITE_BACKEND_API_URL || 'http://localhost:8000');
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞**

–¢–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ:
```javascript
console.log('üîç Environment Debug:', {
  VITE_BACKEND_API_URL: import.meta.env.VITE_BACKEND_API_URL,
  PROD: import.meta.env.PROD,
  DEV: import.meta.env.DEV,
  MODE: import.meta.env.MODE
});

console.log('üåê Final API Base URL:', BACKEND_API_BASE_URL);

console.log('üöÄ API Request:', {
  method: 'GET',
  url: '/health',
  baseURL: '',
  fullURL: '/health'  // ‚Üê –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏–º–µ–Ω–Ω–æ —Ç–∞–∫!
});
```

### **3. –°–æ–∑–¥–∞–Ω –æ—Å–Ω–æ–≤–Ω–æ–π .env —Ñ–∞–π–ª**

**–§–∞–π–ª:** `.env`
```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –¥–ª—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π
VITE_BACKEND_API_URL=
```

### **4. –û–±–Ω–æ–≤–ª–µ–Ω Dockerfile –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞**

```dockerfile
# –£–±–µ–¥–∏–º—Å—è —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π .env —Ñ–∞–π–ª
COPY .env .env

# –û—á–∏—Å—Ç–∏–º –∫–µ—à –∏ —Å–æ–±–µ—Ä–µ–º –∑–∞–Ω–æ–≤–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏  
RUN npm run build
```

## üß™ –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### **1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
```
VITE_BACKEND_API_URL: ""
PROD: true
DEV: false
MODE: "production"
```

### **2. –§–∏–Ω–∞–ª—å–Ω—ã–π API Base URL:**
```
Final API Base URL: ""
```

### **3. API –∑–∞–ø—Ä–æ—Å—ã:**
```
üöÄ API Request: {
  method: 'GET',
  url: '/health',
  baseURL: '',
  fullURL: '/health'
}
```

### **4. –°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
- **–ë—ã–ª–æ:** `GET https://accurate-nurturing-production.up.railway.app/health`
- **–°—Ç–∞–ª–æ:** `GET https://trendxl-20-production-df03.up.railway.app/health`

### **5. Nginx –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
```
–ó–∞–ø—Ä–æ—Å: GET /health
Nginx: location /health ‚Üí proxy_pass http://127.0.0.1:8000/health
Backend: –ø–æ–ª—É—á–∞–µ—Ç GET /health ‚úÖ
```

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

1. **–û—Ç–∫—Ä—ã—Ç—å Console –≤ –±—Ä–∞—É–∑–µ—Ä–µ**
2. **–ù–∞–π—Ç–∏ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
   - `üîç Environment Debug`
   - `üåê Final API Base URL`
   - `üöÄ API Request`

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network tab:**
   - –ó–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –Ω–∞ `/health`, `/api/v1/...`
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ `accurate-nurturing-production.up.railway.app`

## üöÄ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
- ‚úÖ **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏**
- ‚úÖ **–í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ nginx –ø—Ä–æ–∫—Å–∏**  
- ‚úÖ **CORS –æ—à–∏–±–∫–∏ –∏—Å—á–µ–∑–∞—é—Ç**
- ‚úÖ **Backend –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ /api/ routes**

## üîß –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è

–ï—Å–ª–∏ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** - –Ω–∞–π—Ç–∏ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network tab** - –∫—É–¥–∞ –∏–¥—É—Ç –∑–∞–ø—Ä–æ—Å—ã
3. **–û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞** - Ctrl+Shift+R
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Railway –ø–µ—Ä–µ—Å–æ–±—Ä–∞–ª** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º

Railway –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏! üéØ
